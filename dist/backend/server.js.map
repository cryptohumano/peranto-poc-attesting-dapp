{"mappings":"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","sources":["node_modules/@parcel/runtime-browser-hmr/lib/runtime-eef4093631f66ac6.js","src/backend/server.ts","src/backend/utilities/didDocument.ts","src/backend/utilities/keypairs.ts","src/backend/utilities/configuration.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js","src/backend/utilities/initKilt.ts","src/backend/utilities/logger.ts","src/backend/utilities/auth.ts","src/backend/routers/admin.ts","src/backend/endpoints/admin/credentials.ts","src/backend/endpoints/paths.ts","src/backend/utilities/credentialStorage.ts","src/backend/endpoints/user/metamap.ts","src/backend/utilities/attest.ts","src/backend/utilities/cryptoCallbacks.ts","src/backend/utilities/revoke.ts","src/backend/routers/user.ts","src/backend/endpoints/user/pay.ts","src/backend/utilities/sessionStorage.ts","src/backend/endpoints/user/sessionHeader.ts","src/backend/endpoints/user/requestAttestation.ts","src/backend/utilities/supportedCTypes.ts","src/backend/cTypes/emailCType.ts","src/backend/cTypes/twitterCType.ts","src/backend/cTypes/idCType.ts","src/backend/endpoints/user/session.ts","src/backend/endpoints/user/terms.ts","src/backend/utilities/encryptMessage.ts"],"sourcesContent":["var HMR_HOST = null;var HMR_PORT = 1234;var HMR_SECURE = false;var HMR_ENV_HASH = \"83a6293885553881\";module.bundle.HMR_BUNDLE_ID = \"d4be743537d14d4f\";\"use strict\";\n\n/* global HMR_HOST, HMR_PORT, HMR_ENV_HASH, HMR_SECURE, chrome, browser, globalThis, __parcel__import__, __parcel__importScripts__, ServiceWorkerGlobalScope */\n\n/*::\nimport type {\n  HMRAsset,\n  HMRMessage,\n} from '@parcel/reporter-dev-server/src/HMRServer.js';\ninterface ParcelRequire {\n  (string): mixed;\n  cache: {|[string]: ParcelModule|};\n  hotData: mixed;\n  Module: any;\n  parent: ?ParcelRequire;\n  isParcelRequire: true;\n  modules: {|[string]: [Function, {|[string]: string|}]|};\n  HMR_BUNDLE_ID: string;\n  root: ParcelRequire;\n}\ninterface ParcelModule {\n  hot: {|\n    data: mixed,\n    accept(cb: (Function) => void): void,\n    dispose(cb: (mixed) => void): void,\n    // accept(deps: Array<string> | string, cb: (Function) => void): void,\n    // decline(): void,\n    _acceptCallbacks: Array<(Function) => void>,\n    _disposeCallbacks: Array<(mixed) => void>,\n  |};\n}\ninterface ExtensionContext {\n  runtime: {|\n    reload(): void,\n    getURL(url: string): string;\n    getManifest(): {manifest_version: number, ...};\n  |};\n}\ndeclare var module: {bundle: ParcelRequire, ...};\ndeclare var HMR_HOST: string;\ndeclare var HMR_PORT: string;\ndeclare var HMR_ENV_HASH: string;\ndeclare var HMR_SECURE: boolean;\ndeclare var chrome: ExtensionContext;\ndeclare var browser: ExtensionContext;\ndeclare var __parcel__import__: (string) => Promise<void>;\ndeclare var __parcel__importScripts__: (string) => Promise<void>;\ndeclare var globalThis: typeof self;\ndeclare var ServiceWorkerGlobalScope: Object;\n*/\nvar OVERLAY_ID = '__parcel__error__overlay__';\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n  module.bundle.hotData = undefined;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets\n/*: {|[string]: boolean|} */\n, acceptedAssets\n/*: {|[string]: boolean|} */\n, assetsToAccept\n/*: Array<[ParcelRequire, string]> */\n;\n\nfunction getHostname() {\n  return HMR_HOST || (location.protocol.indexOf('http') === 0 ? location.hostname : 'localhost');\n}\n\nfunction getPort() {\n  return HMR_PORT || location.port;\n} // eslint-disable-next-line no-redeclare\n\n\nvar parent = module.bundle.parent;\n\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = getHostname();\n  var port = getPort();\n  var protocol = HMR_SECURE || location.protocol == 'https:' && !/localhost|127.0.0.1|0.0.0.0/.test(hostname) ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + (port ? ':' + port : '') + '/'); // Web extension context\n\n  var extCtx = typeof chrome === 'undefined' ? typeof browser === 'undefined' ? null : browser : chrome; // Safari doesn't support sourceURL in error stacks.\n  // eval may also be disabled via CSP, so do a quick check.\n\n  var supportsSourceURL = false;\n\n  try {\n    (0, eval)('throw new Error(\"test\"); //# sourceURL=test.js');\n  } catch (err) {\n    supportsSourceURL = err.stack.includes('test.js');\n  } // $FlowFixMe\n\n\n  ws.onmessage = async function (event\n  /*: {data: string, ...} */\n  ) {\n    checkedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    acceptedAssets = {}\n    /*: {|[string]: boolean|} */\n    ;\n    assetsToAccept = [];\n    var data\n    /*: HMRMessage */\n    = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      // Remove error overlay if there is one\n      if (typeof document !== 'undefined') {\n        removeErrorOverlay();\n      }\n\n      let assets = data.assets.filter(asset => asset.envHash === HMR_ENV_HASH); // Handle HMR Update\n\n      let handled = assets.every(asset => {\n        return asset.type === 'css' || asset.type === 'js' && hmrAcceptCheck(module.bundle.root, asset.id, asset.depsByBundle);\n      });\n\n      if (handled) {\n        console.clear(); // Dispatch custom event so other runtimes (e.g React Refresh) are aware.\n\n        if (typeof window !== 'undefined' && typeof CustomEvent !== 'undefined') {\n          window.dispatchEvent(new CustomEvent('parcelhmraccept'));\n        }\n\n        await hmrApplyUpdates(assets);\n\n        for (var i = 0; i < assetsToAccept.length; i++) {\n          var id = assetsToAccept[i][1];\n\n          if (!acceptedAssets[id]) {\n            hmrAcceptRun(assetsToAccept[i][0], id);\n          }\n        }\n      } else fullReload();\n    }\n\n    if (data.type === 'error') {\n      // Log parcel errors to console\n      for (let ansiDiagnostic of data.diagnostics.ansi) {\n        let stack = ansiDiagnostic.codeframe ? ansiDiagnostic.codeframe : ansiDiagnostic.stack;\n        console.error(' [parcel]: ' + ansiDiagnostic.message + '\\n' + stack + '\\n\\n' + ansiDiagnostic.hints.join('\\n'));\n      }\n\n      if (typeof document !== 'undefined') {\n        // Render the fancy html overlay\n        removeErrorOverlay();\n        var overlay = createErrorOverlay(data.diagnostics.html); // $FlowFixMe\n\n        document.body.appendChild(overlay);\n      }\n    }\n  };\n\n  ws.onerror = function (e) {\n    console.error(e.message);\n  };\n\n  ws.onclose = function () {\n    console.warn('[parcel]  Connection to the HMR server was lost');\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n\n  if (overlay) {\n    overlay.remove();\n    console.log('[parcel]  Error resolved');\n  }\n}\n\nfunction createErrorOverlay(diagnostics) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n  let errorHTML = '<div style=\"background: black; opacity: 0.85; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; font-family: Menlo, Consolas, monospace; z-index: 9999;\">';\n\n  for (let diagnostic of diagnostics) {\n    let stack = diagnostic.frames.length ? diagnostic.frames.reduce((p, frame) => {\n      return `${p}\n<a href=\"/__parcel_launch_editor?file=${encodeURIComponent(frame.location)}\" style=\"text-decoration: underline; color: #888\" onclick=\"fetch(this.href); return false\">${frame.location}</a>\n${frame.code}`;\n    }, '') : diagnostic.stack;\n    errorHTML += `\n      <div>\n        <div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">\n           ${diagnostic.message}\n        </div>\n        <pre>${stack}</pre>\n        <div>\n          ${diagnostic.hints.map(hint => '<div> ' + hint + '</div>').join('')}\n        </div>\n        ${diagnostic.documentation ? `<div> <a style=\"color: violet\" href=\"${diagnostic.documentation}\" target=\"_blank\">Learn more</a></div>` : ''}\n      </div>\n    `;\n  }\n\n  errorHTML += '</div>';\n  overlay.innerHTML = errorHTML;\n  return overlay;\n}\n\nfunction fullReload() {\n  if ('reload' in location) {\n    location.reload();\n  } else if (extCtx && extCtx.runtime && extCtx.runtime.reload) {\n    extCtx.runtime.reload();\n  }\n}\n\nfunction getParents(bundle, id)\n/*: Array<[ParcelRequire, string]> */\n{\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n\n      if (dep === id || Array.isArray(dep) && dep[dep.length - 1] === id) {\n        parents.push([bundle, k]);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n\n  newLink.onload = function () {\n    if (link.parentNode !== null) {\n      // $FlowFixMe\n      link.parentNode.removeChild(link);\n    }\n  };\n\n  newLink.setAttribute('href', // $FlowFixMe\n  link.getAttribute('href').split('?')[0] + '?' + Date.now()); // $FlowFixMe\n\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\n\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n\n    for (var i = 0; i < links.length; i++) {\n      // $FlowFixMe[incompatible-type]\n      var href\n      /*: string */\n      = links[i].getAttribute('href');\n      var hostname = getHostname();\n      var servedFromHMRServer = hostname === 'localhost' ? new RegExp('^(https?:\\\\/\\\\/(0.0.0.0|127.0.0.1)|localhost):' + getPort()).test(href) : href.indexOf(hostname + ':' + getPort());\n      var absolute = /^https?:\\/\\//i.test(href) && href.indexOf(location.origin) !== 0 && !servedFromHMRServer;\n\n      if (!absolute) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nfunction hmrDownload(asset) {\n  if (asset.type === 'js') {\n    if (typeof document !== 'undefined') {\n      let script = document.createElement('script');\n      script.src = asset.url + '?t=' + Date.now();\n\n      if (asset.outputFormat === 'esmodule') {\n        script.type = 'module';\n      }\n\n      return new Promise((resolve, reject) => {\n        var _document$head;\n\n        script.onload = () => resolve(script);\n\n        script.onerror = reject;\n        (_document$head = document.head) === null || _document$head === void 0 ? void 0 : _document$head.appendChild(script);\n      });\n    } else if (typeof importScripts === 'function') {\n      // Worker scripts\n      if (asset.outputFormat === 'esmodule') {\n        return __parcel__import__(asset.url + '?t=' + Date.now());\n      } else {\n        return new Promise((resolve, reject) => {\n          try {\n            __parcel__importScripts__(asset.url + '?t=' + Date.now());\n\n            resolve();\n          } catch (err) {\n            reject(err);\n          }\n        });\n      }\n    }\n  }\n}\n\nasync function hmrApplyUpdates(assets) {\n  global.parcelHotUpdate = Object.create(null);\n  let scriptsToRemove;\n\n  try {\n    // If sourceURL comments aren't supported in eval, we need to load\n    // the update from the dev server over HTTP so that stack traces\n    // are correct in errors/logs. This is much slower than eval, so\n    // we only do it if needed (currently just Safari).\n    // https://bugs.webkit.org/show_bug.cgi?id=137297\n    // This path is also taken if a CSP disallows eval.\n    if (!supportsSourceURL) {\n      let promises = assets.map(asset => {\n        var _hmrDownload;\n\n        return (_hmrDownload = hmrDownload(asset)) === null || _hmrDownload === void 0 ? void 0 : _hmrDownload.catch(err => {\n          // Web extension bugfix for Chromium\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=1255412#c12\n          if (extCtx && extCtx.runtime && extCtx.runtime.getManifest().manifest_version == 3) {\n            if (typeof ServiceWorkerGlobalScope != 'undefined' && global instanceof ServiceWorkerGlobalScope) {\n              extCtx.runtime.reload();\n              return;\n            }\n\n            asset.url = extCtx.runtime.getURL('/__parcel_hmr_proxy__?url=' + encodeURIComponent(asset.url + '?t=' + Date.now()));\n            return hmrDownload(asset);\n          }\n\n          throw err;\n        });\n      });\n      scriptsToRemove = await Promise.all(promises);\n    }\n\n    assets.forEach(function (asset) {\n      hmrApply(module.bundle.root, asset);\n    });\n  } finally {\n    delete global.parcelHotUpdate;\n\n    if (scriptsToRemove) {\n      scriptsToRemove.forEach(script => {\n        if (script) {\n          var _document$head2;\n\n          (_document$head2 = document.head) === null || _document$head2 === void 0 ? void 0 : _document$head2.removeChild(script);\n        }\n      });\n    }\n  }\n}\n\nfunction hmrApply(bundle\n/*: ParcelRequire */\n, asset\n/*:  HMRAsset */\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (asset.type === 'css') {\n    reloadCSS();\n  } else if (asset.type === 'js') {\n    let deps = asset.depsByBundle[bundle.HMR_BUNDLE_ID];\n\n    if (deps) {\n      if (modules[asset.id]) {\n        // Remove dependencies that are removed and will become orphaned.\n        // This is necessary so that if the asset is added back again, the cache is gone, and we prevent a full page reload.\n        let oldDeps = modules[asset.id][1];\n\n        for (let dep in oldDeps) {\n          if (!deps[dep] || deps[dep] !== oldDeps[dep]) {\n            let id = oldDeps[dep];\n            let parents = getParents(module.bundle.root, id);\n\n            if (parents.length === 1) {\n              hmrDelete(module.bundle.root, id);\n            }\n          }\n        }\n      }\n\n      if (supportsSourceURL) {\n        // Global eval. We would use `new Function` here but browser\n        // support for source maps is better with eval.\n        (0, eval)(asset.output);\n      } // $FlowFixMe\n\n\n      let fn = global.parcelHotUpdate[asset.id];\n      modules[asset.id] = [fn, deps];\n    } else if (bundle.parent) {\n      hmrApply(bundle.parent, asset);\n    }\n  }\n}\n\nfunction hmrDelete(bundle, id) {\n  let modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (modules[id]) {\n    // Collect dependencies that will become orphaned when this module is deleted.\n    let deps = modules[id][1];\n    let orphans = [];\n\n    for (let dep in deps) {\n      let parents = getParents(module.bundle.root, deps[dep]);\n\n      if (parents.length === 1) {\n        orphans.push(deps[dep]);\n      }\n    } // Delete the module. This must be done before deleting dependencies in case of circular dependencies.\n\n\n    delete modules[id];\n    delete bundle.cache[id]; // Now delete the orphans.\n\n    orphans.forEach(id => {\n      hmrDelete(module.bundle.root, id);\n    });\n  } else if (bundle.parent) {\n    hmrDelete(bundle.parent, id);\n  }\n}\n\nfunction hmrAcceptCheck(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  if (hmrAcceptCheckOne(bundle, id, depsByBundle)) {\n    return true;\n  } // Traverse parents breadth first. All possible ancestries must accept the HMR update, or we'll reload.\n\n\n  let parents = getParents(module.bundle.root, id);\n  let accepted = false;\n\n  while (parents.length > 0) {\n    let v = parents.shift();\n    let a = hmrAcceptCheckOne(v[0], v[1], null);\n\n    if (a) {\n      // If this parent accepts, stop traversing upward, but still consider siblings.\n      accepted = true;\n    } else {\n      // Otherwise, queue the parents in the next level upward.\n      let p = getParents(module.bundle.root, v[1]);\n\n      if (p.length === 0) {\n        // If there are no parents, then we've reached an entry without accepting. Reload.\n        accepted = false;\n        break;\n      }\n\n      parents.push(...p);\n    }\n  }\n\n  return accepted;\n}\n\nfunction hmrAcceptCheckOne(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n, depsByBundle\n/*: ?{ [string]: { [string]: string } }*/\n) {\n  var modules = bundle.modules;\n\n  if (!modules) {\n    return;\n  }\n\n  if (depsByBundle && !depsByBundle[bundle.HMR_BUNDLE_ID]) {\n    // If we reached the root bundle without finding where the asset should go,\n    // there's nothing to do. Mark as \"accepted\" so we don't reload the page.\n    if (!bundle.parent) {\n      return true;\n    }\n\n    return hmrAcceptCheck(bundle.parent, id, depsByBundle);\n  }\n\n  if (checkedAssets[id]) {\n    return true;\n  }\n\n  checkedAssets[id] = true;\n  var cached = bundle.cache[id];\n  assetsToAccept.push([bundle, id]);\n\n  if (!cached || cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n}\n\nfunction hmrAcceptRun(bundle\n/*: ParcelRequire */\n, id\n/*: string */\n) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n\n  if (cached && cached.hot) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n  cached = bundle.cache[id];\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      var assetsToAlsoAccept = cb(function () {\n        return getParents(module.bundle.root, id);\n      });\n\n      if (assetsToAlsoAccept && assetsToAccept.length) {\n        // $FlowFixMe[method-unbinding]\n        assetsToAccept.push.apply(assetsToAccept, assetsToAlsoAccept);\n      }\n    });\n  }\n\n  acceptedAssets[id] = true;\n}","import express from 'express';\nimport bodyParser from 'body-parser';\n\nimport { didDocumentPromise } from './utilities/didDocument';\nimport { configuration } from './utilities/configuration';\nimport { logger } from './utilities/logger';\n\nimport { auth } from './utilities/auth';\nimport { adminRouter } from './routers/admin';\nimport { userRouter } from './routers/user';\n\nconst initApp = async () => {\n  await didDocumentPromise;\n  logger.info('Blockchain connection initialized');\n\n  const app = express();\n  app.use(bodyParser.json());\n\n  app.use('/admin', auth, adminRouter);\n  app.use('/', userRouter);\n\n  logger.info('Routes configured');\n\n  const host = '0.0.0.0';\n  const { port, baseUri } = configuration;\n  const started = app.listen(port, host, () =>\n    logger.info(`Listening on ${baseUri} (host: ${host}, port: ${port})`),\n  );\n\n  function stop() {\n    started.close();\n    process.exit(1);\n  }\n\n  process.on('unhandledRejection', stop);\n  process.on('uncaughtException', stop);\n\n  return app;\n};\n\nexport default initApp();\n","import type { DidDocument, KeyRelationship } from '@kiltprotocol/sdk-js';\nimport { Did, Utils } from '@kiltprotocol/sdk-js';\n\nimport { keypairsPromise } from './keypairs';\nimport { configuration } from './configuration';\nimport { initKilt } from './initKilt';\n\nasync function compareKeys(\n  configured: { publicKey: Uint8Array },\n  resolved: { publicKey: Uint8Array } | undefined,\n  relationship: KeyRelationship,\n): Promise<void> {\n  if (!resolved) {\n    throw new Error(\n      `Your on-chain DID is broken: the resolved key for ${relationship} is undefined`,\n    );\n  }\n\n  const derivedHex = Utils.Crypto.u8aToHex(configured.publicKey);\n  const resolvedHex = Utils.Crypto.u8aToHex(resolved.publicKey);\n\n  if (derivedHex !== resolvedHex) {\n    throw new Error(\n      `Your on-chain DID is broken: the configured key for ${relationship} does not match resolved one`,\n    );\n  }\n}\n\nasync function compareAllKeys(fullDid: DidDocument): Promise<void> {\n  const keypairs = await keypairsPromise;\n\n  await compareKeys(\n    keypairs.authentication,\n    fullDid.authentication[0],\n    'authentication',\n  );\n  await compareKeys(\n    keypairs.assertionMethod,\n    fullDid.assertionMethod?.[0],\n    'assertionMethod',\n  );\n  await compareKeys(\n    keypairs.keyAgreement,\n    fullDid.keyAgreement?.[0],\n    'keyAgreement',\n  );\n}\n\nexport const didDocumentPromise = (async () => {\n  await initKilt();\n\n  const { did } = configuration;\n  if (!did) {\n    throw new Error('DID not configured, have you run createDID script?');\n  }\n\n  const resolved = await Did.resolve(did);\n  if (!resolved || !resolved.document) {\n    throw new Error(\n      `Could not resolve the configured DID ${did}, have you run createDID script?`,\n    );\n  }\n\n  const { document } = resolved;\n  await compareAllKeys(document);\n\n  const authenticationKey = document.authentication?.[0];\n  if (!authenticationKey) {\n    throw new Error('Impossible: authentication key not found');\n  }\n\n  const assertionMethodKey = document.assertionMethod?.[0];\n  if (!assertionMethodKey) {\n    throw new Error('Impossible: assertion method key not found');\n  }\n\n  const keyAgreementKey = document.keyAgreement?.[0];\n  if (!keyAgreementKey) {\n    throw new Error('Impossible: key agreement key not found');\n  }\n\n  return {\n    did,\n    didDocument: document,\n    authenticationKey,\n    assertionMethodKey,\n    keyAgreementKey,\n  };\n})();\n","import { Utils } from '@kiltprotocol/sdk-js';\nimport { cryptoWaitReady } from '@polkadot/util-crypto';\n\nimport { configuration } from './configuration';\n\nexport const keypairsPromise = (async () => {\n  await cryptoWaitReady();\n\n  const payer = Utils.Crypto.makeKeypairFromUri(configuration.payerMnemonic);\n\n  const authentication = Utils.Crypto.makeKeypairFromUri(\n    configuration.authenticationMnemonic,\n  );\n\n  const assertionMethod = Utils.Crypto.makeKeypairFromUri(\n    configuration.assertionMethodMnemonic,\n  );\n\n  const keyAgreement = Utils.Crypto.makeEncryptionKeypairFromSeed(\n    Utils.Crypto.mnemonicToMiniSecret(configuration.keyAgreementMnemonic),\n  );\n\n  return {\n    payer,\n    authentication,\n    assertionMethod,\n    keyAgreement,\n  };\n})();\n","import { cwd } from 'node:process';\nimport path from 'node:path';\n\nimport { config } from 'dotenv';\nimport { pino } from 'pino';\nimport { DidUri } from '@kiltprotocol/sdk-js';\n\nconfig();\n\nclass ConfigurationError extends Error {\n  constructor(message: string) {\n    super(message);\n    pino().fatal(message);\n    process.exit(1);\n  }\n}\n\nconst { env } = process;\n\nconst baseUri = env.URL;\nif (!baseUri) {\n  throw new ConfigurationError('URL is not provided');\n}\n\nconst did = env.DID as DidUri;\n\nconst payerMnemonic = env.SECRET_PAYER_MNEMONIC;\nif (!payerMnemonic) {\n  throw new ConfigurationError('SECRET_PAYER_MNEMONIC is not provided');\n}\nconst authenticationMnemonic = env.SECRET_AUTHENTICATION_MNEMONIC;\nif (!authenticationMnemonic) {\n  throw new ConfigurationError(\n    'SECRET_AUTHENTICATION_MNEMONIC is not provided',\n  );\n}\nconst assertionMethodMnemonic = env.SECRET_ASSERTION_METHOD_MNEMONIC;\nif (!assertionMethodMnemonic) {\n  throw new ConfigurationError(\n    'SECRET_ASSERTION_METHOD_MNEMONIC is not provided',\n  );\n}\nconst keyAgreementMnemonic = env.SECRET_KEY_AGREEMENT_MNEMONIC;\nif (!keyAgreementMnemonic) {\n  throw new ConfigurationError('SECRET_KEY_AGREEMENT_MNEMONIC is not provided');\n}\n\nconst blockchainEndpoint = env.BLOCKCHAIN_ENDPOINT;\nif (!blockchainEndpoint) {\n  throw new ConfigurationError('No blockchain endpoint provided');\n}\n\nconst adminUsername = env.ADMIN_USERNAME;\nconst adminPassword = env.ADMIN_PASSWORD;\nif (!adminUsername || !adminPassword) {\n  throw new ConfigurationError('Admin credentials missing');\n}\n\nexport const configuration = {\n  port: parseInt(env.PORT as string) || 3000,\n  blockchainEndpoint,\n  baseUri,\n  distFolder: path.join(cwd(), 'dist', 'frontend'),\n  did,\n  payerMnemonic,\n  authenticationMnemonic,\n  assertionMethodMnemonic,\n  keyAgreementMnemonic,\n  adminUsername,\n  adminPassword,\n};\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n","import { connect } from '@kiltprotocol/sdk-js';\n\nimport { configuration } from './configuration';\n\nexport async function initKilt(): Promise<void> {\n  await connect(configuration.blockchainEndpoint);\n}\n","import { pino } from 'pino';\nimport pretty from 'pino-pretty';\n\nconst stream = pretty({\n  levelFirst: true,\n  colorize: true,\n  ignore: 'time,hostname,pid',\n});\n\nexport const logger = pino(\n  {\n    level: 'trace',\n  },\n  stream,\n);\n","import basicAuth from 'express-basic-auth';\nimport { configuration } from './configuration';\n\nconst { adminUsername, adminPassword } = configuration;\n\nexport const auth = basicAuth({\n  users: { [adminUsername]: adminPassword },\n  challenge: true,\n});\n","import express, { Router } from 'express';\nimport { configuration } from '../utilities/configuration';\n\nimport { credentials } from '../endpoints/admin/credentials';\n\nexport const adminRouter = Router();\n\nadminRouter.use(credentials);\n\nadminRouter.use(\n  // eslint-disable-next-line import/no-named-as-default-member\n  express.static(`${configuration.distFolder}/admin`, {\n    dotfiles: 'allow',\n    setHeaders(res) {\n      res.set('Access-Control-Allow-Origin', '*');\n    },\n  }),\n);\n\nadminRouter.get('*', (request, response) => {\n  response.sendFile(`${configuration.distFolder}/admin/index.html`);\n});\n","import { Response, Router } from 'express';\n\nimport { paths } from '../paths';\nimport {\n  NotFoundError,\n  deleteCredential,\n  getCredential,\n  listCredentials,\n  addAttestation,\n} from '../../utilities/credentialStorage';\nimport { StatusCodes } from 'http-status-codes';\nimport { logger } from '../../utilities/logger';\nimport { attest } from '../../utilities/attest';\nimport { revoke } from '../../utilities/revoke';\n\nfunction sendErrorResponse(error: unknown, response: Response) {\n  logger.error(error);\n  if (error instanceof NotFoundError) {\n    response.status(StatusCodes.NOT_FOUND).send(error);\n  } else {\n    response.status(StatusCodes.INTERNAL_SERVER_ERROR).send(error);\n  }\n}\n\nexport const credentials = Router();\n// Trigger deploy\n\ncredentials.get(paths.credentials.list, async (request, response) => {\n  logger.debug('Getting list of credentials');\n  response.send(await listCredentials());\n});\n\ncredentials.get(paths.credentials.item, async (request, response) => {\n  try {\n    const { id } = request.params;\n\n    logger.debug(`Getting credential`);\n\n    response.send(await getCredential(id));\n  } catch (error) {\n    sendErrorResponse(error, response);\n  }\n});\n\ncredentials.delete(paths.credentials.item, async (request, response) => {\n  try {\n    const { id } = request.params;\n    logger.debug('Deleting credential');\n\n    await deleteCredential(id);\n\n    response.sendStatus(StatusCodes.OK);\n  } catch (error) {\n    sendErrorResponse(error, response);\n  }\n});\n\ncredentials.post(paths.credentials.attest, async (request, response) => {\n  try {\n    const { id } = request.params;\n\n    logger.debug(`Getting credential`);\n    const { claim } = (await getCredential(id)) as any;\n\n    logger.debug('Attesting credential');\n    const attestation = await attest(claim);\n\n    logger.debug('Credential attested, updating database');\n    const attestedCredential = await addAttestation(id, attestation);\n\n    response.send(attestedCredential);\n  } catch (error) {\n    sendErrorResponse(error, response);\n  }\n});\n\ncredentials.post(paths.credentials.revoke, async (request, response) => {\n  try {\n    const { id } = request.params;\n\n    logger.debug('Getting credential');\n    const { claim } = (await getCredential(id)) as any;\n\n    logger.debug('Revoking credential');\n    const attestation = await revoke(claim);\n\n    logger.debug('Credential revoked, updating database');\n    const revokedCredential = await addAttestation(id, attestation);\n\n    response.send(revokedCredential);\n  } catch (error) {\n    sendErrorResponse(error, response);\n  }\n});\n","export const paths = {\n  session: '/api/session',\n  terms: '/api/terms',\n  requestAttestation: '/api/request-attestation',\n  pay: '/api/pay',\n\n  // admin\n  credentials: {\n    list: '/api/credentials',\n    item: '/api/credentials/:id',\n    attest: '/api/credentials/:id/attest',\n    revoke: '/api/credentials/:id/revoke',\n  },\n};\n","/* eslint-disable import/no-extraneous-dependencies */\nimport { randomUUID } from 'node:crypto';\n\nimport { IAttestation, ICredential } from '@kiltprotocol/sdk-js';\nimport {\n  doc,\n  setDoc,\n  getDocs,\n  getDoc,\n  collection,\n  updateDoc,\n  deleteDoc,\n} from 'firebase/firestore';\nimport { firestore } from '../endpoints/user/metamap';\n\nexport class NotFoundError extends Error {}\n\nexport interface Credential {\n  claim: ICredential;\n  attestation?: IAttestation;\n}\n\n// Maps are used for example purposes. A real database should be used in production.\n// const credentials: Map<string, Credential> = new Map();\n\nexport function addClaim(claim: ICredential) {\n  const id = randomUUID();\n  // credentials.set(id, { claim });\n\n  setDoc(doc(firestore, 'credentials', id), { claim });\n}\n\nexport async function listCredentials() {\n  // return Object.fromEntries(credentials.entries());\n\n  let result: any = {};\n  const docs = await getDocs(collection(firestore, 'credentials'));\n\n  docs.forEach((doc) => {\n    result = { ...result, [doc.id]: { ...doc.data(), id: doc.id } };\n  });\n\n  return result;\n}\n\nexport async function getCredential(id: string) {\n  // const credential = credentials.get(id);\n  const _doc = await getDoc(doc(firestore, 'credentials', id));\n  const credential = { ..._doc.data(), id };\n\n  if (!credential) {\n    throw new NotFoundError('Credential not found');\n  }\n\n  return credential;\n}\n\nexport async function deleteCredential(id: string) {\n  await deleteDoc(doc(firestore, 'credentials', id));\n\n  // const deleted = credentials.delete(id);\n  // if (!deleted) {\n  //   throw new NotFoundError('Credential not found');\n  // }\n}\n\nexport async function addAttestation(id: string, attestation: IAttestation) {\n  const credential = await getCredential(id);\n\n  // credentials.set(id, { ...credential, attestation });\n  await updateDoc(doc(firestore, 'credentials', id), {\n    ...credential,\n    attestation,\n  });\n\n  return await getCredential(id);\n}\n","/* eslint-disable import/no-extraneous-dependencies */\nimport { Request, Response, Router } from 'express';\nimport { StatusCodes } from 'http-status-codes';\nimport { initializeApp, getApps } from 'firebase/app';\n\nimport { getFirestore, doc, setDoc } from 'firebase/firestore';\n\nimport { logger } from '../../utilities/logger';\n\nconst firebaseConfig = {\n  apiKey: 'AIzaSyAAwR5GvEUi3lLWy9bb1tz65jhvHI3vufc',\n  authDomain: 'peranto-test.firebaseapp.com',\n  projectId: 'peranto-test',\n  storageBucket: 'peranto-test.appspot.com',\n  messagingSenderId: '777447831295',\n  appId: '1:777447831295:web:6a987d7c8b307ecef43eca',\n};\n\nconst apps = getApps();\n\nexport const firebase =\n  apps.length > 0 ? apps[0] : initializeApp(firebaseConfig);\n\nexport const firestore = getFirestore(firebase);\n\n// WH SECRET oEI07pv3tHbQ1069H61r35C0K\nasync function handler(req: Request, res: Response): Promise<void> {\n  try {\n    const { eventName } = req.body;\n\n    const docRef = await setDoc(\n      doc(firestore, 'metamap', 'testId_' + eventName),\n      {\n        payload: JSON.stringify({\n          computed: {\n            age: {\n              data: 30,\n            },\n          },\n          documents: [\n            {\n              country: 'MX',\n              merchantFields: [],\n              region: null,\n              type: 'national-id',\n              subtype: 'credencial-para-votar',\n              steps: [\n                {\n                  status: 200,\n                  id: 'age-check',\n                  cacheHit: null,\n                  data: {\n                    age: 30,\n                    ageThreshold: 18,\n                    underage: false,\n                  },\n                  error: null,\n                },\n                {\n                  status: 200,\n                  id: 'alteration-detection',\n                  cacheHit: null,\n                  error: null,\n                },\n                {\n                  status: 200,\n                  id: 'facematch',\n                  cacheHit: null,\n                  data: {\n                    score: 100,\n                  },\n                  error: null,\n                },\n                {\n                  status: 200,\n                  id: 'template-matching',\n                  cacheHit: null,\n                  error: null,\n                },\n                {\n                  status: 200,\n                  id: 'document-reading',\n                  cacheHit: null,\n                  data: {\n                    fullName: {\n                      value: 'EDGAR DANIEL SALINAS LEDESMA',\n                      required: true,\n                      label: 'Name',\n                    },\n                    address: {\n                      value:\n                        'AV MARINA NACIONAL 200 EDIF 1 A 74 U HAB MARINA NACIONAL 11320 MIGUEL HIDALGO, CDMX.',\n                      required: false,\n                      label: 'Address',\n                    },\n                    emissionDate: {\n                      value: '2017-01-01',\n                      required: false,\n                      label: 'Emission Date',\n                      format: 'date',\n                    },\n                    documentNumber: {\n                      value: '163631998',\n                      required: true,\n                      label: 'Document Number',\n                    },\n                    dateOfBirth: {\n                      value: '1992-07-18',\n                      required: true,\n                      label: 'Day of Birth',\n                      format: 'date',\n                    },\n                    expirationDate: {\n                      value: '2027-12-31',\n                      required: false,\n                      label: 'Date of Expiration',\n                      format: 'date',\n                    },\n                    documentType: {\n                      value: 'ID',\n                      required: false,\n                      label: 'Document Type',\n                    },\n                    firstName: {\n                      value: 'EDGAR DANIEL',\n                      required: false,\n                      label: 'First Name',\n                    },\n                    issueCountry: {\n                      value: 'MEX',\n                      required: false,\n                      label: 'Issue Country',\n                    },\n                    nationality: {\n                      value: 'MEX',\n                      required: false,\n                      label: 'Nationality',\n                    },\n                    sex: {\n                      value: 'M',\n                      required: false,\n                      label: 'Sex',\n                    },\n                    surname: {\n                      value: 'SALINAS LEDESMA',\n                      required: false,\n                      label: 'Surname',\n                    },\n                    cde: {\n                      value: 'SLLDED92071809H000',\n                      required: false,\n                      label: 'Elector Key',\n                    },\n                    curp: {\n                      value: 'SALE920718HDFLDD08',\n                      required: false,\n                      label: 'CURP',\n                    },\n                    ne: {\n                      value: '01',\n                      required: false,\n                      label: 'Emission Number',\n                    },\n                    ocrNumber: {\n                      value: '5182086432677',\n                      required: false,\n                      label: 'OCR Number',\n                    },\n                  },\n                  error: null,\n                },\n              ],\n              fields: {\n                address: {\n                  value:\n                    'AV MARINA NACIONAL 200 EDIF 1 A 74 U HAB MARINA NACIONAL 11320 MIGUEL HIDALGO, CDMX.',\n                },\n                cde: {\n                  value: 'SLLDED92071809H000',\n                },\n                curp: {\n                  value: 'SALE920718HDFLDD08',\n                },\n                dateOfBirth: {\n                  value: '1992-07-18',\n                },\n                documentNumber: {\n                  value: '163631998',\n                },\n                documentType: {\n                  value: 'ID',\n                },\n                emissionDate: {\n                  value: '2017-01-01',\n                },\n                expirationDate: {\n                  value: '2027-12-31',\n                },\n                firstName: {\n                  value: 'EDGAR DANIEL',\n                },\n                fullName: {\n                  value: 'EDGAR DANIEL SALINAS LEDESMA',\n                },\n                issueCountry: {\n                  value: 'MEX',\n                },\n                nationality: {\n                  value: 'MEX',\n                },\n                ne: {\n                  value: '01',\n                },\n                ocrNumber: {\n                  value: '5182086432677',\n                },\n                sex: {\n                  value: 'M',\n                },\n                surname: {\n                  value: 'SALINAS LEDESMA',\n                },\n              },\n              photos: [\n                'https://media.getmati.com/file?location=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWxlTmFtZSI6ImQwNmM2YWI0LTM2YmYtNDdkOC04NzE3LWQ0Y2NlNDRmNDU5ZC5qcGVnIiwiZm9sZGVyIjoiZG9jdW1lbnQiLCJpYXQiOjE2ODgzNDAyMTMsImV4cCI6MTY4ODQyNjYxMywiYXVkIjoiZWFjMTYwZmYtYTBlNS00M2QxLWFkNTktNTIwMjI1YmQ3OWI4In0.2mkLDqtZfGz8XcraYd1PoZnoYkkwUrPxXCvmYehQHxY',\n                'https://media.getmati.com/file?location=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWxlTmFtZSI6ImNlYzdlNjE4LTVkMmMtNDcxNi05MWM4LWUxYTAyM2RiMWNiNC5qcGVnIiwiZm9sZGVyIjoiZG9jdW1lbnQiLCJpYXQiOjE2ODgzNDAyMTMsImV4cCI6MTY4ODQyNjYxMywiYXVkIjoiZWFjMTYwZmYtYTBlNS00M2QxLWFkNTktNTIwMjI1YmQ3OWI4In0.aXVYcsK0D6VqfIeiTsRqZd2R_53G-sk7SD-SxB5Oq3g',\n              ],\n            },\n          ],\n          expired: false,\n          flow: {\n            id: '64811ce44d683b001b9013ef',\n            name: 'Default flow',\n          },\n          identity: {\n            id: '64a0f46f43bd9d001b7a2778',\n            status: 'verified',\n          },\n          steps: [\n            {\n              status: 200,\n              id: 'liveness',\n              cacheHit: null,\n              data: {\n                videoUrl:\n                  'https://media.getmati.com/file?location=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWxlTmFtZSI6Ijk2YTA0NTBlLWQzZGUtNGNjYS05MGFkLTQ5NGZiMjc4MGUwNy5ta3YiLCJmb2xkZXIiOiJ2aWRlbyIsImlhdCI6MTY4ODM0MDIxMywiZXhwIjoxNjg4NDI2NjEzLCJhdWQiOiJlYWMxNjBmZi1hMGU1LTQzZDEtYWQ1OS01MjAyMjViZDc5YjgifQ.TEQNks36DielBu29ThmFnColNqFYYwMWeehoaY-mTVk',\n                spriteUrl:\n                  'https://media.getmati.com/file?location=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWxlTmFtZSI6IjEzOWMxNjhkLWY1MTUtNGEwNS04NWFjLTQ4ZjRjYmQ1MDI5Mi5qcGVnIiwiZm9sZGVyIjoic2VsZmllIiwiaWF0IjoxNjg4MzQwMjEzLCJleHAiOjE2ODg0MjY2MTMsImF1ZCI6ImVhYzE2MGZmLWEwZTUtNDNkMS1hZDU5LTUyMDIyNWJkNzliOCJ9.1qEptKVwj9lUI3P9trJXWy7HRpIA_nBpbXrlNwNPnoY',\n                selfieUrl:\n                  'https://media.getmati.com/file?location=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmaWxlTmFtZSI6IjM5YWYwYzAzLTVlZWYtNDM5ZC1iZDNkLWI0N2RkZDlhYjg0MC5qcGVnIiwiZm9sZGVyIjoic2VsZmllIiwiaWF0IjoxNjg4MzQwMjEzLCJleHAiOjE2ODg0MjY2MTMsImF1ZCI6ImVhYzE2MGZmLWEwZTUtNDNkMS1hZDU5LTUyMDIyNWJkNzliOCJ9.wjiXYcGF13To2E4IqZL5u0MKLhkBwNdGhxy9VEzylD8',\n              },\n              error: null,\n            },\n          ],\n          masJobToBePostpone: false,\n          profileId: 'MX|NATIONAL-ID|163631998',\n          id: '64a0f46f43bd9d001b7a277a',\n          deviceFingerprint: {\n            ua: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36',\n            browser: {\n              name: 'Chrome',\n              version: '114.0.0.0',\n              major: '114',\n            },\n            engine: {\n              name: 'Blink',\n              version: '114.0.0.0',\n            },\n            os: {\n              name: 'Mac OS',\n              version: '10.15.7',\n            },\n            app: {\n              platform: 'web_desktop',\n              version: '22.3.5',\n            },\n            ip: '187.191.38.141',\n            vpnDetectionEnabled: false,\n          },\n          hasProblem: false,\n        }),\n      },\n    );\n\n    res.json({\n      docRef,\n    });\n  } catch (error) {\n    logger.error(error);\n\n    res.status(StatusCodes.INTERNAL_SERVER_ERROR).send(error);\n  }\n}\n\nexport const metamap = Router();\n\nmetamap.post('/api/metamap', handler);\n","import {\n  Attestation,\n  Blockchain,\n  ConfigService,\n  Did,\n  IAttestation,\n  ICredential,\n} from '@kiltprotocol/sdk-js';\nimport { configuration } from './configuration';\nimport { sign } from './cryptoCallbacks';\nimport { keypairsPromise } from './keypairs';\n\nexport async function attest(credential: ICredential): Promise<IAttestation> {\n  const api = ConfigService.get('api');\n\n  const attestation = Attestation.fromCredentialAndDid(\n    credential,\n    configuration.did,\n  );\n\n  const { claimHash, cTypeHash } = attestation;\n\n  const { payer } = await keypairsPromise;\n\n  const tx = api.tx.attestation.add(claimHash, cTypeHash, null);\n  const authorized = await Did.authorizeTx(\n    configuration.did,\n    tx,\n    sign,\n    payer.address,\n  );\n\n  await Blockchain.signAndSubmitTx(authorized, payer);\n\n  return attestation;\n}\n","import {\n  DecryptCallback,\n  DidResourceUri,\n  EncryptCallback,\n  SignRequestData,\n  Utils,\n} from '@kiltprotocol/sdk-js';\n\nimport { keypairsPromise } from './keypairs';\nimport { didDocumentPromise } from './didDocument';\n\nexport async function sign({ data, keyRelationship }: SignRequestData) {\n  if (keyRelationship === 'capabilityDelegation') {\n    throw new Error('Delegation not supported');\n  }\n  const { authentication, assertionMethod } = await keypairsPromise;\n  const { did, authenticationKey, assertionMethodKey } =\n    await didDocumentPromise;\n\n  const [keypair, publicKey] =\n    keyRelationship === 'authentication'\n      ? [authentication, authenticationKey]\n      : [assertionMethod, assertionMethodKey];\n\n  const keyUri: DidResourceUri = `${did}${publicKey.id}`;\n\n  return {\n    signature: keypair.sign(data, { withType: false }),\n    keyType: keypair.type,\n    keyUri,\n  };\n}\n\nexport async function signWithAssertionMethod({ data }: { data: Uint8Array }) {\n  const { assertionMethod } = await keypairsPromise;\n\n  const { did, assertionMethodKey } = await didDocumentPromise;\n  const keyUri: DidResourceUri = `${did}${assertionMethodKey.id}`;\n\n  return {\n    signature: assertionMethod.sign(data, { withType: false }),\n    keyType: assertionMethod.type,\n    keyUri,\n  };\n}\n\nexport async function encrypt({\n  data,\n  peerPublicKey,\n}: Parameters<EncryptCallback>[0]) {\n  const { keyAgreement } = await keypairsPromise;\n\n  const { did, keyAgreementKey } = await didDocumentPromise;\n  const keyUri: DidResourceUri = `${did}${keyAgreementKey.id}`;\n\n  const { box, nonce } = Utils.Crypto.encryptAsymmetric(\n    data,\n    peerPublicKey,\n    keyAgreement.secretKey,\n  );\n\n  return {\n    data: box,\n    nonce,\n    keyUri,\n  };\n}\n\nexport async function decrypt({\n  data: box,\n  nonce,\n  peerPublicKey,\n}: Parameters<DecryptCallback>[0]) {\n  const { keyAgreement } = await keypairsPromise;\n\n  const data = Utils.Crypto.decryptAsymmetric(\n    { box, nonce },\n    peerPublicKey,\n    keyAgreement.secretKey,\n  );\n  if (!data) {\n    throw new Error('Failed to decrypt with given key');\n  }\n\n  return {\n    data,\n  };\n}\n","import {\n  Attestation,\n  Blockchain,\n  ConfigService,\n  Did,\n  ICredential,\n} from '@kiltprotocol/sdk-js';\nimport { configuration } from './configuration';\nimport { sign } from './cryptoCallbacks';\nimport { keypairsPromise } from './keypairs';\n\nexport async function revoke(credential: ICredential) {\n  const api = ConfigService.get('api');\n  const { rootHash } = credential;\n\n  const tx = api.tx.attestation.revoke(rootHash, null);\n\n  const { payer } = await keypairsPromise;\n\n  const authorized = await Did.authorizeTx(\n    configuration.did,\n    tx,\n    sign,\n    payer.address,\n  );\n\n  await Blockchain.signAndSubmitTx(authorized, payer);\n\n  const attestation = await api.query.attestation.attestations(rootHash);\n\n  return Attestation.fromChain(attestation, rootHash);\n}\n","import express, { Router } from 'express';\n\nimport { pay } from '../endpoints/user/pay';\nimport { requestAttestation } from '../endpoints/user/requestAttestation';\nimport { session } from '../endpoints/user/session';\nimport { terms } from '../endpoints/user/terms';\nimport { metamap } from '../endpoints/user/metamap';\n\nimport { configuration } from '../utilities/configuration';\n\nexport const userRouter = Router();\n\nuserRouter.use(session);\nuserRouter.use(terms);\nuserRouter.use(requestAttestation);\nuserRouter.use(pay);\nuserRouter.use(metamap);\n\nuserRouter.use(\n  // eslint-disable-next-line import/no-named-as-default-member\n  express.static(`${configuration.distFolder}/user`, {\n    dotfiles: 'allow',\n    setHeaders(res) {\n      res.set('Access-Control-Allow-Origin', '*');\n    },\n  }),\n);\n\nuserRouter.get('*', (request, response) => {\n  response.sendFile(`${configuration.distFolder}/user/index.html`);\n});\n","import { Request, Response, Router } from 'express';\nimport { StatusCodes } from 'http-status-codes';\nimport { logger } from '../../utilities/logger';\nimport { Session, sessionMiddleware } from '../../utilities/sessionStorage';\nimport { paths } from '../paths';\nimport { addClaim } from '../../utilities/credentialStorage';\n\nasync function handler(request: Request, response: Response): Promise<void> {\n  // implement your payment logic here\n\n  try {\n    logger.debug('Mock processing payment');\n\n    const {\n      session: { credential },\n    } = request as Request & { session: Session };\n\n    if (!credential) {\n      throw new Error('Session credential not found');\n    }\n\n    addClaim(credential);\n\n    logger.debug('Payment received, sent credential to attester');\n    response.sendStatus(StatusCodes.NO_CONTENT);\n  } catch (error) {\n    logger.error(error);\n    response.status(StatusCodes.INTERNAL_SERVER_ERROR).send(error);\n  }\n}\n\nexport const pay = Router();\n\npay.post(paths.pay, sessionMiddleware, handler);\n","import { NextFunction, Request, Response } from 'express';\nimport { StatusCodes } from 'http-status-codes';\nimport NodeCache from 'node-cache';\nimport { DidResourceUri, DidUri, ICredential } from '@kiltprotocol/sdk-js';\n\nimport { sessionHeader } from '../endpoints/user/sessionHeader';\n\nexport interface BasicSession {\n  sessionId: string;\n  did?: DidUri;\n  encryptionKeyUri?: DidResourceUri;\n  didChallenge?: string;\n  didConfirmed?: boolean;\n  credential?: ICredential;\n}\n\nexport type Session = BasicSession & {\n  did: DidUri;\n  encryptionKeyUri: DidResourceUri;\n};\n\nconst sessionStorage = new NodeCache({ stdTTL: 5 * 60 * 60, useClones: false });\n\nfunction getSessionById(sessionId: string): BasicSession {\n  const session = sessionStorage.get(sessionId);\n  if (!session) {\n    throw new Error(`Unknown or expired session ${sessionId}`);\n  }\n  return session as BasicSession;\n}\n\nfunction getBasicSession(request: Request): BasicSession {\n  const sessionId = request.get(sessionHeader);\n\n  if (!sessionId) {\n    throw new Error(`Required header ${sessionHeader} is missing`);\n  }\n\n  return getSessionById(sessionId);\n}\n\nfunction getSession(request: Request): Session {\n  const session = getBasicSession(request);\n\n  const { did, didConfirmed, encryptionKeyUri } = session;\n  if (!did || !didConfirmed || !encryptionKeyUri) {\n    throw new Error('Unconfirmed DID');\n  }\n\n  return { ...session, did, encryptionKeyUri };\n}\n\nexport function setSession(session: BasicSession): void {\n  sessionStorage.set(session.sessionId, session);\n}\n\nexport function basicSessionMiddleware(\n  request: Request,\n  response: Response,\n  next: NextFunction,\n): void {\n  try {\n    const session = getBasicSession(request);\n    (request as Request & { session: BasicSession }).session = session;\n    next();\n  } catch (error) {\n    response.status(StatusCodes.FORBIDDEN).send(error);\n  }\n}\n\nexport function sessionMiddleware(\n  request: Request,\n  response: Response,\n  next: NextFunction,\n): void {\n  try {\n    const session = getSession(request);\n    (request as Request & { session: Session }).session = session;\n    next();\n  } catch (error) {\n    response.status(StatusCodes.FORBIDDEN).send(error);\n  }\n}\n","export const sessionHeader = 'x-session-id';\n","import { Credential, CType, Message, Quote } from '@kiltprotocol/sdk-js';\nimport { Request, Response, Router } from 'express';\nimport { StatusCodes } from 'http-status-codes';\nimport { decrypt } from '../../utilities/cryptoCallbacks';\nimport { logger } from '../../utilities/logger';\nimport {\n  Session,\n  sessionMiddleware,\n  setSession,\n} from '../../utilities/sessionStorage';\nimport { supportedCTypes } from '../../utilities/supportedCTypes';\nimport { paths } from '../paths';\n\nasync function handler(request: Request, response: Response): Promise<void> {\n  try {\n    logger.debug('Handling attestation request');\n\n    const message = await Message.decrypt(request.body, decrypt);\n    const messageBody = message.body;\n    logger.debug('Request attestation message decrypted');\n\n    Message.verifyMessageBody(messageBody);\n    const { type } = messageBody;\n\n    if (type === 'reject' || type === 'reject-terms') {\n      response.status(StatusCodes.CONFLICT).send('Message contains rejection');\n      return;\n    }\n\n    if (type !== 'request-attestation') {\n      throw new Error('Unexpected message type');\n    }\n\n    const { quote, credential } = messageBody.content;\n\n    if (quote) {\n      await Quote.verifyQuoteAgreement(quote);\n      logger.debug('Quote agreement verified');\n    }\n\n    const cTypes = Object.values(supportedCTypes);\n    const cTypeId = CType.hashToId(credential.claim.cTypeHash);\n    const ctype = cTypes.find(({ $id }) => $id === cTypeId);\n    if (!ctype) {\n      response.status(StatusCodes.FORBIDDEN).send('Unsupported CType');\n    }\n    logger.debug('CType supported');\n\n    await Credential.verifyWellFormed(credential, { ctype });\n    logger.debug('Credential data structure verified');\n\n    const { session } = request as Request & { session: Session };\n    setSession({ ...session, credential });\n\n    logger.debug('Request attestation complete');\n    response.sendStatus(StatusCodes.NO_CONTENT);\n  } catch (error) {\n    response.status(StatusCodes.INTERNAL_SERVER_ERROR).send(error);\n  }\n}\n\nexport const requestAttestation = Router();\n\nrequestAttestation.post(paths.requestAttestation, sessionMiddleware, handler);\n","import type { ICType } from '@kiltprotocol/sdk-js';\n\nimport { emailCType } from '../cTypes/emailCType';\nimport { twitterCType } from '../cTypes/twitterCType';\nimport { idCType } from '../cTypes/idCType';\n\nexport const supportedCTypeKeys = ['email', 'twitter', 'id'] as const;\n\nexport type SupportedCType = (typeof supportedCTypeKeys)[number];\n\nexport const supportedCTypes: Record<SupportedCType, ICType> = {\n  email: emailCType,\n  twitter: twitterCType,\n  id: idCType,\n};\n\nexport const kiltCost: Record<SupportedCType, number> = {\n  id: 2,\n  email: 2,\n  twitter: 3,\n};\n\nexport function isSupportedCType(cType: string): cType is SupportedCType {\n  return supportedCTypeKeys.includes(cType as SupportedCType);\n}\n","import type { ICType } from '@kiltprotocol/sdk-js';\n\nexport const emailCType: ICType = {\n  $schema: 'http://kilt-protocol.org/draft-01/ctype#',\n  title: 'Email',\n  properties: {\n    Email: {\n      type: 'string',\n    },\n  },\n  type: 'object',\n  $id: 'kilt:ctype:0x3291bb126e33b4862d421bfaa1d2f272e6cdfc4f96658988fbcffea8914bd9ac',\n};\n","import type { ICType } from '@kiltprotocol/sdk-js';\n\nexport const twitterCType: ICType = {\n  $schema: 'http://kilt-protocol.org/draft-01/ctype#',\n  title: 'Twitter',\n  properties: {\n    Twitter: {\n      type: 'string',\n    },\n  },\n  type: 'object',\n  $id: 'kilt:ctype:0x47d04c42bdf7fdd3fc5a194bcaa367b2f4766a6b16ae3df628927656d818f420',\n};\n","import type { ICType } from '@kiltprotocol/sdk-js';\n\nexport const idCType: ICType = {\n  $schema: 'http://kilt-protocol.org/draft-01/ctype#',\n  properties: {\n    email: {\n      type: 'string',\n    },\n    username: {\n      type: 'string',\n    },\n  },\n  title: 'Authorization',\n  type: 'object',\n  $id: 'kilt:ctype:0xdf952230c87e7fbdc8503a394540c8e99029180611e7107c4eee33f67f57aa57',\n};\n","import { Request, Response, Router } from 'express';\nimport { StatusCodes } from 'http-status-codes';\n\nimport { Did, DidResourceUri, Utils } from '@kiltprotocol/sdk-js';\nimport { randomAsHex } from '@polkadot/util-crypto';\n\nimport { didDocumentPromise } from '../../utilities/didDocument';\nimport { decrypt } from '../../utilities/cryptoCallbacks';\nimport {\n  BasicSession,\n  basicSessionMiddleware,\n  setSession,\n} from '../../utilities/sessionStorage';\nimport { logger } from '../../utilities/logger';\n\nimport { paths } from '../paths';\n\nexport interface CheckSessionInput {\n  encryptionKeyUri: DidResourceUri;\n  encryptedChallenge: string;\n  nonce: string;\n}\n\nasync function handler(request: Request, response: Response): Promise<void> {\n  try {\n    logger.debug('Session confirmation started');\n\n    const payload = request.body as CheckSessionInput;\n    const { encryptionKeyUri, encryptedChallenge, nonce } = payload;\n    const { session } = request as Request & { session: BasicSession };\n\n    const encryptionKey = await Did.resolveKey(encryptionKeyUri);\n\n    logger.debug('Session confirmation resolved DID encryption key');\n\n    const { keyAgreementKey, did } = await didDocumentPromise;\n\n    const { data } = await decrypt({\n      data: Utils.Crypto.coToUInt8(encryptedChallenge),\n      nonce: Utils.Crypto.coToUInt8(nonce),\n      keyUri: `${did}${keyAgreementKey.id}`,\n      peerPublicKey: encryptionKey.publicKey,\n    });\n    logger.debug('Session confirmation decrypted challenge');\n\n    const decryptedChallenge = Utils.Crypto.u8aToHex(data);\n    const originalChallenge = session.didChallenge;\n\n    if (decryptedChallenge !== originalChallenge) {\n      response\n        .status(StatusCodes.FORBIDDEN)\n        .send('Challenge signature mismatch');\n      return;\n    }\n\n    setSession({\n      ...session,\n      did: encryptionKey.controller,\n      encryptionKeyUri,\n      didConfirmed: true,\n    });\n\n    logger.debug('Challenge confirmation matches');\n    response.sendStatus(StatusCodes.NO_CONTENT);\n  } catch (error) {\n    response.status(StatusCodes.INTERNAL_SERVER_ERROR).send(error);\n  }\n}\n\nfunction startSession() {\n  const sessionId = randomAsHex(24);\n  const challenge = randomAsHex(24);\n\n  setSession({ sessionId, didChallenge: challenge });\n\n  return {\n    challenge,\n    sessionId,\n  };\n}\n\nexport interface GetSessionOutput {\n  dAppEncryptionKeyUri: DidResourceUri;\n  sessionId: string;\n  challenge: string;\n}\n\nconst path = paths.session;\n\nexport const session = Router();\n\nsession.get(path, async (request, response) => {\n  const { did, keyAgreementKey } = await didDocumentPromise;\n  const dAppEncryptionKeyUri: DidResourceUri = `${did}${keyAgreementKey.id}`;\n  response.send({\n    dAppEncryptionKeyUri,\n    ...startSession(),\n  } as GetSessionOutput);\n});\n\nsession.post(path, basicSessionMiddleware, handler);\n","import { Claim, IClaimContents, IQuote, Quote } from '@kiltprotocol/sdk-js';\nimport { Request, Response, Router } from 'express';\nimport { StatusCodes } from 'http-status-codes';\nimport { configuration } from '../../utilities/configuration';\nimport { sign } from '../../utilities/cryptoCallbacks';\nimport { encryptMessageBody } from '../../utilities/encryptMessage';\nimport { logger } from '../../utilities/logger';\nimport { Session, sessionMiddleware } from '../../utilities/sessionStorage';\nimport {\n  kiltCost,\n  SupportedCType,\n  supportedCTypes,\n} from '../../utilities/supportedCTypes';\nimport { paths } from '../paths';\n\nconst TTL = 5 * 60 * 60 * 1000;\nconst TERMS = 'https://example.com/terms-and-conditions';\n\ninterface Input {\n  type: SupportedCType;\n  claimContents: IClaimContents;\n}\n\nasync function handler(request: Request, response: Response): Promise<void> {\n  try {\n    logger.debug('Submit terms started');\n\n    const { session } = request as Request & { session: Session };\n    const { encryptionKeyUri } = session;\n\n    const { type, claimContents } = request.body as Input;\n\n    logger.info('ctype: ' + JSON.stringify(supportedCTypes[type]));\n    const claim = Claim.fromCTypeAndClaimContents(\n      supportedCTypes[type],\n      claimContents,\n      session.did,\n    );\n    logger.debug('Generated claim');\n\n    const quote: IQuote = {\n      attesterDid: configuration.did,\n      cTypeHash: claim.cTypeHash,\n      cost: { tax: { VAT: 0 }, net: kiltCost[type], gross: kiltCost[type] },\n      currency: 'KILT',\n      timeframe: new Date(Date.now() + TTL).toISOString(),\n      termsAndConditions: TERMS,\n    };\n\n    const signedQuote = await Quote.createAttesterSignedQuote(quote, sign);\n    logger.debug('Signed quote');\n\n    const output = await encryptMessageBody(encryptionKeyUri, {\n      content: {\n        claim,\n        legitimations: [],\n        quote: signedQuote,\n        cTypes: [supportedCTypes[type]],\n      },\n      type: 'submit-terms',\n    });\n    logger.debug('Submit terms complete');\n    response.send(output);\n  } catch (error) {\n    response.status(StatusCodes.INTERNAL_SERVER_ERROR).send(error);\n  }\n}\nexport const terms = Router();\n\nterms.post(paths.terms, sessionMiddleware, handler);\n","import type {\n  DidResourceUri,\n  IEncryptedMessage,\n  MessageBody,\n} from '@kiltprotocol/sdk-js';\nimport { Did, Message } from '@kiltprotocol/sdk-js';\n\nimport { encrypt } from './cryptoCallbacks';\nimport { configuration } from './configuration';\n\nexport async function encryptMessageBody(\n  encryptionKeyUri: DidResourceUri,\n  messageBody: MessageBody,\n): Promise<IEncryptedMessage> {\n  const { did } = Did.parse(encryptionKeyUri);\n\n  const message = Message.fromBody(messageBody, configuration.did, did);\n  return Message.encrypt(message, encrypt, encryptionKeyUri);\n}\n"],"names":[],"version":3,"file":"server.js.map","sourceRoot":"../../"}