var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire94c2;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,s.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequire94c2=s);var i=s("aaGF3"),a=s("aLBVI"),r=s("jQ7Zu"),l=s("5a1fP"),d=s("l4VFs"),c=s("3hLxt"),o=s("5jKHo");function h(e,t){return(0,d.generatePath)(`/admin${e}`,t)}function u(){const{id:e}=(0,d.useParams)(),t=(0,d.useNavigate)(),[n,s]=(0,r.useState)(),[l,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{n||(async()=>{try{s(await a.default.get(h(c.paths.credentials.item,{id:e})).json())}catch{u(!0)}})()}),[n,e]);const[j,x]=(0,r.useState)(!1),p=(0,r.useCallback)((async()=>{try{u(!1),x(!0),s(await a.default.post(h(c.paths.credentials.attest,{id:e}),{timeout:!1,retry:{limit:10,methods:["post"]}}).json())}catch{u(!0)}finally{x(!1)}}),[e]),f=(0,r.useCallback)((async()=>{try{u(!1),await a.default.delete(h(c.paths.credentials.item,{id:e})),t(o.paths.admin.home)}catch{u(!0)}}),[e,t]),m=(0,r.useCallback)((async()=>{try{u(!1),x(!0),s(await a.default.post(h(c.paths.credentials.revoke,{id:e}),{timeout:!1,retry:{limit:10,methods:["post"]}}).json())}catch{u(!0)}finally{x(!1)}}),[e]);if(!n)return l?(0,i.jsx)("p",{children:"Credential not found"}):null;const{claim:y,attestation:g}=n;return(0,i.jsxs)("section",{children:[(0,i.jsx)("pre",{children:JSON.stringify(y,null,4)}),!g&&(0,i.jsxs)("div",{children:[(0,i.jsx)("button",{disabled:j,onClick:p,children:"Attest"}),(0,i.jsx)("button",{disabled:j,onClick:f,children:"Reject"})]}),g&&!g.revoked&&(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Attested ✅"}),(0,i.jsx)("button",{disabled:j,onClick:m,children:"Revoke"})]}),g&&g.revoked&&(0,i.jsx)("p",{children:"Revoked ❌"}),j&&(0,i.jsx)("p",{children:"Processing..."}),l&&(0,i.jsx)("p",{children:"Oops, there was an error"})]})}function j({credentials:e}){return(0,i.jsx)("ul",{children:e.map((([e])=>(0,i.jsx)("li",{children:(0,i.jsx)(d.Link,{to:(0,d.generatePath)(o.paths.admin.credential,{id:e}),children:e})},e)))})}function x(){const[e,t]=(0,r.useState)(),[n,s]=(0,r.useState)(!1),l=e?.filter((([,{attestation:e}])=>!e)),d=e?.filter((([,{attestation:e}])=>e&&!e.revoked)),o=e?.filter((([,{attestation:e}])=>e&&e.revoked));return(0,r.useEffect)((()=>{(async()=>{try{const e=await a.default.get(h(c.paths.credentials.list)).json();t(Object.entries(e))}catch{s(!0)}})()}),[]),e?(0,i.jsxs)("section",{children:[(0,i.jsx)("h1",{children:"Admin Page"}),0===e.length&&(0,i.jsx)("p",{children:"No credentials"}),l&&l.length>0&&(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{children:"Pending credentials"}),(0,i.jsx)(j,{credentials:l})]}),d&&d.length>0&&(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{children:"Attested credentials"}),(0,i.jsx)(j,{credentials:d})]}),o&&o.length>0&&(0,i.jsxs)("section",{children:[(0,i.jsx)("h2",{children:"Revoked credentials"}),(0,i.jsx)(j,{credentials:o})]})]}):n?(0,i.jsx)("p",{children:"Unable to fetch credentials"}):null}(0,l.createRoot)(document.querySelector("#app")).render((0,i.jsx)(d.BrowserRouter,{children:(0,i.jsxs)(d.Routes,{children:[(0,i.jsx)(d.Route,{path:o.paths.admin.credential,element:(0,i.jsx)(u,{})}),(0,i.jsx)(d.Route,{path:o.paths.admin.home,element:(0,i.jsx)(x,{})}),(0,i.jsx)(d.Route,{path:"*",element:(0,i.jsx)("p",{children:"404 - Not found"})})]})}));
//# sourceMappingURL=index.3138990c.js.map
